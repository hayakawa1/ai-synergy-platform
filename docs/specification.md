# AI Synergy 仕様書

## 1. 概要

「AI Synergy」は、生成AI（LLM）技術を活用してシステム開発の依頼者と開発者を結ぶマッチングプラットフォームです。

- 依頼者（クライアント）は、生成AIを用いてシステム要件を素早く具体化し、当サイト上にプロジェクトとして登録します。
- 開発者（エンジニア）は、その要件をもとにプロトタイプを提案し、実動する試作版を通じてクライアントに具体的なイメージを提示します。
- 本プラットフォームを通じて、システム開発の要件定義や仕様策定プロセスを効率化・透明化し、依頼者と開発者のミスマッチやリスクを低減することを目指します。

## 2. 開発環境

- プログラミング言語: Python 3.x
- フレームワーク: Flask
- データベース: SQLite
- 認証: Google OAuth 2.0
- ホスティング:
  - 開発・テスト環境: ローカル（Flask 開発サーバー）
  - 本番環境: 必要に応じて AWS, GCP, Heroku などを検討
- Python パッケージ管理: pip / pipenv / poetry (いずれか想定)

## 3. システム構成概要

```
[ブラウザ] -- HTTPS -- [Flask アプリサーバー] -- [SQLite DB]
                         |
                         └── Google OAuth サーバー（認証/認可）
```

- ユーザー（クライアント/エンジニア）がブラウザを介してサイトへアクセス
- Flask アプリケーションが、ユーザー認証時に Google OAuth 2.0 を利用
- 認証成功後、Flask アプリケーションがセッション情報を SQLite に記録
- 要件定義や提案などの情報は、Flask アプリケーションを介して SQLite に保存

## 4. 主な機能

### 4.1 ユーザー認証

#### Google アカウントによるログイン
- ユーザーが「Googleでログイン」ボタンをクリックすると、Google OAuth 2.0 認証フローにリダイレクト
- 認証が完了すると、コールバックURLでユーザー情報を受け取り、アプリケーションがユーザー情報をセッション・DBに登録/更新

#### セッション管理
- Flaskの session を利用
- ログイン状態を適切に管理し、一定期間操作がない場合に自動ログアウト
- OAuth 連携解除または手動ログアウトの処理

### 4.2 プロジェクト（要件定義）投稿機能

#### プロジェクト投稿フォーム
- プロジェクトの名称（必須）
- 要件概要（必須）
- AI（ChatGPT 等）で生成した要件（テキスト）を投稿
- 予算や希望納期、その他詳細情報

#### プロジェクト管理
- ユーザーが投稿したプロジェクト一覧をマイページで確認可能
- 投稿後のプロジェクトの編集、削除機能

### 4.3 提案（プロトタイプ）投稿機能

#### エンジニアの提案フォーム
- プロジェクトに紐づく提案を行う
- ソースコードの概要や動作確認用リンク（試作版デモURL）
- 見積金額、開発スケジュール、使用技術、コメント欄 等

#### 提案一覧/詳細
- クライアントは自分のプロジェクトに対してエンジニアから寄せられた提案を一覧で閲覧し、提案詳細も確認可能
- 提案のステータス管理（検討中/採用/却下など）

### 4.4 コメント/チャット機能

- プロジェクトや提案に対するディスカッション
- クライアントとエンジニアがプロジェクトや提案ごとにコメント欄でやりとり
- 既読や未読管理（将来の機能拡張を想定）

### 4.5 マッチング成立・契約

#### 採用（契約成立）フロー
- クライアントが提案を「採用」に指定すると、契約成立フラグを立てる
- 採用されたエンジニアに通知される

#### 契約後の要件変更や追加機能
- 要件のアップデート履歴を残す（別途実装検討）

### 4.6 プロフィール管理

#### クライアント/エンジニア共通
- 表示名、連絡先、自己紹介などの基本情報
- 過去のプロジェクト実績、評価

#### エンジニア向け追加項目
- スキルセット、得意分野、ポートフォリオなど

### 4.7 AI アシスト機能（将来的に拡張）

#### システム要件定義アシスト
- クライアントが要件を入力すると、ChatGPT API 等を利用して要件定義を補助
- 提案書作成や見積もり補助

#### コードレビューアシスト
- エンジニアが提出するソースコードを簡易チェック
- バグの指摘や最適化提案（将来実装を想定）

## 5. データベース設計（SQLite想定）

### 5.1 テーブル構成

#### users
- id (INTEGER, PRIMARY KEY, AUTOINCREMENT)
- google_user_id (TEXT, UNIQUE) …Googleアカウントに紐付け
- display_name (TEXT)
- email (TEXT)
- user_type (TEXT) …"client" or "engineer"
- created_at (DATETIME)
- updated_at (DATETIME)

#### projects
- id (INTEGER, PRIMARY KEY, AUTOINCREMENT)
- user_id (INTEGER) …投稿ユーザーID（クライアント）
- title (TEXT)
- description (TEXT) …要件定義や仕様
- budget (INTEGER)
- due_date (DATETIME)
- created_at (DATETIME)
- updated_at (DATETIME)

#### proposals
- id (INTEGER, PRIMARY KEY, AUTOINCREMENT)
- project_id (INTEGER)
- user_id (INTEGER) …提案エンジニアのユーザーID
- proposal_details (TEXT) …提案詳細、プロトタイプやデモURL
- estimate_cost (INTEGER)
- estimate_duration (TEXT)
- status (TEXT) …"検討中" / "採用" / "却下" など
- created_at (DATETIME)
- updated_at (DATETIME)

#### comments
- id (INTEGER, PRIMARY KEY, AUTOINCREMENT)
- project_id (INTEGER) …プロジェクトに紐付く場合
- proposal_id (INTEGER) …提案に紐付く場合
- user_id (INTEGER)
- comment_text (TEXT)
- created_at (DATETIME)

※ 紐付け関係:
- 1対多 (users : projects)
- 1対多 (users : proposals)
- 1対多 (projects : proposals)
- コメントは project_id, proposal_id のどちらかに紐付け可能

## 6. URL設計（エンドポイント）

| 機能 | メソッド | パス | 説明 |
|-----|---------|------|------|
| トップページ | GET | / | メイン画面、未ログイン時は紹介文・ログインボタンなど表示 |
| ログイン | GET | /login | Google OAuth へのリダイレクト |
| コールバック | GET | /oauth/callback | Google 認証後のコールバック |
| ログアウト | GET | /logout | セッション破棄 |
| プロジェクト一覧 | GET | /projects | 公開中のプロジェクト一覧 |
| プロジェクト作成 | GET/POST | /projects/new | 新規プロジェクト投稿 |
| プロジェクト詳細 | GET | /projects/<int:id> | プロジェクトの詳細情報 |
| プロジェクト編集 | GET/POST | /projects/<int:id>/edit | プロジェクトの編集 |
| プロジェクト削除 | POST | /projects/<int:id>/delete | プロジェクトの削除 |
| 提案投稿 | GET/POST | /projects/<int:id>/proposal/new | 提案投稿 |
| 提案詳細 | GET | /proposals/<int:id> | 提案内容の詳細表示 |
| 提案ステータス変更 | POST | /proposals/<int:id>/status | 提案のステータス変更 |
| コメント投稿 | POST | /comments | コメントデータ登録 |
| マイページ | GET | /users/<int:id> | ユーザーのプロフィール |
| プロフィール編集 | GET/POST | /users/<int:id>/edit | プロフィール編集 |

## 7. 認証/セキュリティ

### HTTPS通信
- 本番環境では SSL/TLS 証明書を使用し、HTTPS での通信を必須

### Google OAuth 2.0
- クライアントIDとクライアントシークレットを安全に管理
- オフラインアクセス不要の場合は scope を最小限に

### CSRF対策
- フォーム送信には CSRF トークンを付与し、不正リクエストを防止

### 入力値バリデーション
- プロジェクト投稿、提案投稿等の入力フォームにバリデーションを適用
- 文字数上限、必須項目、数値項目の範囲チェック

### エラーハンドリング
- 例外時や404、500などのステータスページを用意

## 8. 運用/保守

### DBバックアップ
- SQLite のファイルバックアップを定期的に実行
- 大規模運用時は他のRDBMSへの移行を検討

### ログ管理
- Flask のログ機能や外部ツールを使い、アクセスログやエラーログを収集
- 保管期間や分析方法については運用方針に合わせて設定

### スケーラビリティ
- Flask は Gunicorn + Nginx 等で運用
- 大量の画像/ファイルアップロードを想定する場合、S3等を利用

### 将来的な拡張
- AI アシスト機能（ChatGPT API等）
- お知らせ/通知機能
- 決済機能の導入

## 9. ユースケースフロー

1. ユーザーの新規登録/ログイン
   - Googleアカウントでログイン → ユーザー種別選択 → マイページ

2. クライアントがプロジェクト投稿
   - 新規作成フォーム → 要件入力 → 登録 → 公開

3. エンジニアが提案を投稿
   - プロジェクト詳細 → 提案投稿 → 試作版URL等入力 → 登録

4. やりとり・コメント
   - プロジェクト/提案詳細でコメントやりとり

5. クライアントが提案を採用/契約
   - 提案詳細 → 採用ボタン → 契約成立

6. システム要件/契約後の変更
   - AIアシストで要件変更 → 追加工数合意 → 再契約

## 10. 期待効果

### 効率化
- 要件定義をAIで補助し、クライアントの作業負担を削減

### 透明性
- 初期段階で実動するプロトタイプを確認でき、完成イメージとリスクを把握しやすい

### スピード
- 従来の長いプロセスを短縮し、依頼から開発開始までのリードタイムを大幅に削減

## 付録: 使用ライブラリ

- Flask: Webアプリケーションフレームワーク
- Flask-Login / Flask-Dance: OAuth 連携サポート
- SQLAlchemy: ORM（SQLite操作）
- Flask-WTF: フォームバリデーション、CSRF対策
- Requests: 外部API呼び出し
- gunicorn: WSGIサーバー（本番デプロイ） 